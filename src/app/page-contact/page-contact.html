<section>
	<h1>Contact Me</h1>
	<br />
	<p>
		Please fill out the form below to get in touch. Apologies for no direct email contact, this form helps prevent
		spam and protect my privacy. I will respond to your legitimate inquiries.
	</p>
	<br />
	<br />
	<form class="flex flex-col gap-6 x-auto" (ngSubmit)="submit()" #contactForm="ngForm" novalidate>
		<!-- Row 1: Name and Organisation -->
		<div class="flex sm:flex-row flex-col gap-4">
			<div class="flex-1 flex flex-col">
				<label for="name" class="mb-1 font-semibold">
					Name
					@if (validationErrors.name) {
						<span class="text-brand-red">*</span>
					}
				</label>
				<input
					id="name"
					name="name"
					type="text"
					class="border-white-3 border-[1px] rounded px-3 py-2 bg-blue-4 focus:outline-none focus:border-white-1"
					[(ngModel)]="form.name"
					(input)="validate()"
					required
					aria-required="true" />
				@if (validationErrors.name) {
					<span class="text-brand-red text-sm mt-1">{{ validationErrors.name }}</span>
				}
			</div>
			<div class="flex-1 flex flex-col">
				<label for="organisation" class="mb-1 font-semibold">
					Organisation
					<span class="text-gray-400">(optional)</span>
				</label>
				<input
					id="organisation"
					name="organisation"
					type="text"
					class="border-white-3 border-[1px] rounded px-3 py-2 bg-blue-4 focus:outline-none focus:border-white-1"
					[(ngModel)]="form.organisation"
					(input)="validate()" />
			</div>
		</div>
		<!-- Row 2: Subject and Email -->
		<div class="flex flex-col sm:flex-row gap-4">
			<div class="flex-1 flex flex-col">
				<label for="subject" class="mb-1 font-semibold">
					Subject
					@if (validationErrors.subject) {
						<span class="text-brand-red">*</span>
					}
				</label>
				<input
					id="subject"
					name="subject"
					type="text"
					class="border-white-3 border-[1px] rounded px-3 py-2 bg-blue-4 appearance-none focus:outline-none focus:border-white-1"
					[(ngModel)]="form.subject"
					(input)="validate()"
					required
					aria-required="true" />
				@if (validationErrors.subject) {
					<span class="text-brand-red text-sm mt-1">{{ validationErrors.subject }}</span>
				}
			</div>
			<div class="flex-1 flex flex-col">
				<label for="email" class="mb-1 font-semibold">
					Email
					@if (validationErrors.email) {
						<span class="text-brand-red">*</span>
					}
				</label>
				<input
					id="email"
					name="email"
					type="email"
					class="border-white-3 border-[1px] rounded px-3 py-2 bg-blue-4 focus:outline-none focus:border-white-1"
					[(ngModel)]="form.email"
					(input)="validate()"
					required
					aria-required="true" />
				@if (validationErrors.email) {
					<span class="text-brand-red text-sm mt-1">{{ validationErrors.email }}</span>
				}
			</div>
		</div>
		<!-- Row 3: Message -->
		<div class="flex flex-col">
			<label for="message" class="mb-1 font-semibold">
				Message
				@if (validationErrors.message) {
					<span class="text-brand-red">*</span>
				}
			</label>
			<textarea
				id="message"
				name="message"
				rows="5"
				class="border-white-3 border-[1px] rounded px-3 py-2 bg-blue-4 focus:outline-none focus:border-white-1"
				[(ngModel)]="form.message"
				(input)="validate()"
				required
				aria-required="true"></textarea>
			@if (validationErrors.message) {
				<span class="text-brand-red text-sm mt-1">{{ validationErrors.message }}</span>
			}
		</div>
		<!-- Row 4: Response Message & Submit Button -->
		<div class="flex flex-col sm:flex-row items-center justify-between gap-8">
			<p class="mt-2 text-lg my-auto!" aria-live="polite">{{ responseMessage$ | async }}</p>
			@if (formState === "invalid") {
				<button class="text-white-1 px-6 py-2 rounded-sm bg-white-3 cursor-not-allowed">Contact</button>
			}
			@if (formState === "valid") {
				<button class="text-white-1 px-6 py-2 rounded-sm bg-brand-blue cursor-pointer">Contact</button>
			}
			@if (formState === "loading") {
				<button class="text-white-1 px-6 py-2 rounded-sm bg-white-3 cursor-wait">Sending...</button>
			}
			@if (formState === "success") {
				<button class="text-white-1 px-6 py-2 rounded-sm bg-brand-green cursor-default">Success</button>
			}
			@if (formState === "error") {
				<button class="text-white-1 px-6 py-2 rounded-sm bg-brand-red cursor-default">Error</button>
			}
		</div>
	</form>
</section>
